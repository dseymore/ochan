<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Image Browser</title>
        <script src="sencha-touch.js" type="text/javascript"></script>
        <link href="sencha-touch.css" rel="stylesheet" type="text/css" />
</head>
<body>


</body>
<script type="text/javascript">

var widthG = 400;
var heightG = 400;
var car;
var orientationG;

var idC = 3;
var pos = 0;

    new Ext.Application({
        launch: function() {
                var a = { title: "1", style: "background-repeat:no-repeat; background-image: url('/thumb.view?identifier=1&width=400&height=400&dt="+new Date().getTime()+"');", }
                var b = { title: "2", style: "background-repeat:no-repeat; background-image: url('/thumb.view?identifier=2&width=400&height=400&dt="+new Date().getTime()+"');", }

            car = new Ext.Carousel({
                fullscreen: true,
                items: [a,b],
            });

                <!-- when we switch.. we need to update the styles to be the next image... -->
            car.on("beforecardswitch",function(container,newcard,oldcard,index,animated) {
                    var d = { title: idC, style: "background-repeat:no-repeat; background-image: url('/thumb.view?identifier="+idC+"&width="+widthG+"&height="+heightG+"&dt="+new Date().getTime()+"');"}

<!-- fix me, only progressing.. not regressing through list -->
                    car.add(d);
                    if (pos > 0){
                            car.remove(oldcard);
                    }
                    car.doLayout();
                    idC+=1;
                    pos=index;
                });

            <!-- When the screen rotats, we need to get the new width and height and udpdate the urls. -->
            car.on("orientationchange",function(panel,orientation,width,height){
                if (orientation != orientationG){
                        widthG = width;
                        heightG = height;
                        orientationG = orientation;

                        var id = parseInt(panel.getActiveItem().title);
                        var e = { title: id, style: "background-repeat:no-repeat; background-image: url('/thumb.view?identifier="+id+"&width="+widthG+"&height="+heightG+"&dt="+new Date().getTime()+"');"}
                        car.removeAll();
                        car.add(e);
                        id+=1;
                        var f = { title: id, style: "background-repeat:no-repeat; background-image: url('/thumb.view?identifier="+id+"&width="+widthG+"&height="+heightG+"&dt="+new Date().getTime()+"');"}
                        idC=id+1;
                        car.add(f);
                        car.doLayout();
                }
                });
        }
    });

</script>
</html>